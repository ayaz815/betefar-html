<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body
    class="h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600"
  >
    <div class="bg-white p-8 rounded-xl shadow-xl w-full max-w-xl">
      <!-- Navigation Arrows -->
      <div class="flex justify-between items-center mb-4">
        <button
          id="prevBtn"
          class="px-4 py-2 bg-gray-300 rounded-md shadow opacity-50 cursor-not-allowed"
        >
          &#8592; Previous
        </button>
        <span id="pageNumber" class="text-lg font-semibold text-gray-700"
          >Page 1</span
        >
        <button
          id="nextBtn"
          class="px-4 py-2 bg-gray-300 rounded-md shadow hover:bg-gray-400"
        >
          Next &#8594;
        </button>
      </div>

      <!-- Form -->
      <form id="quizForm" class="space-y-5">
        <!-- Name of Quiz -->
        <div>
          <label class="block text-lg font-medium text-gray-700 mb-1"
            >Name of Quiz</label
          >
          <input
            type="text"
            id="quizName"
            placeholder="Enter quiz name"
            class="w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
          />
        </div>

        <!-- MP3 File Upload -->
        <div>
          <label class="block text-lg font-medium text-gray-700 mb-1"
            >Upload MP3 File</label
          >
          <div class="relative">
            <label
              for="mp3File"
              class="inline-block px-5 py-2 bg-indigo-500 text-white font-semibold text-center rounded-md cursor-pointer hover:bg-indigo-600"
            >
              Choose File
            </label>
            <input type="file" id="mp3File" accept=".mp3" class="hidden" />
          </div>
          <p id="fileName" class="text-sm text-gray-600 mt-1">
            No file selected
          </p>
        </div>

        <!-- Question -->
        <div>
          <label class="block text-lg font-medium text-gray-700 mb-1"
            >Question</label
          >
          <textarea
            id="question"
            placeholder="Enter the question"
            class="w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
            rows="2"
          ></textarea>
        </div>

        <!-- Answer -->
        <div>
          <label class="block text-lg font-medium text-gray-700 mb-1"
            >Answer</label
          >
          <textarea
            id="answer"
            placeholder="Enter the answer"
            class="w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
            rows="2"
          ></textarea>
        </div>

        <!-- Buttons -->
        <div class="flex justify-between items-center mt-6">
          <button
            type="button"
            id="saveBtn"
            class="px-5 py-2 text-white font-semibold bg-indigo-500 rounded-md shadow hover:bg-indigo-600"
          >
            Save
          </button>
          <button
            type="button"
            id="exportZip"
            class="px-5 py-2 text-white font-semibold bg-[#FFC000] rounded-md shadow hover:bg-[#FFC000]"
          >
            Export ZIP
          </button>
        </div>
      </form>
    </div>

    <script>
      let currentPage = 1;
      const totalPages = 5;
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const pageNumber = document.getElementById("pageNumber");
      const fileInput = document.getElementById("mp3File");
      const fileNameDisplay = document.getElementById("fileName");

      // Store data per page in localStorage
      let formData = JSON.parse(localStorage.getItem("quizData")) || {};

      function saveFormData() {
        formData[currentPage] = {
          quizName: document.getElementById("quizName").value,
          question: document.getElementById("question").value,
          answer: document.getElementById("answer").value,
          mp3File: fileInput.files[0]
            ? URL.createObjectURL(fileInput.files[0])
            : formData[currentPage]?.mp3File || "",
        };
        localStorage.setItem("quizData", JSON.stringify(formData));
      }

      function loadFormData() {
        const data = formData[currentPage] || {};
        document.getElementById("quizName").value = data.quizName || "";
        document.getElementById("question").value = data.question || "";
        document.getElementById("answer").value = data.answer || "";
        fileNameDisplay.textContent = data.mp3File
          ? "Selected file"
          : "No file selected";
      }

      // Handle file selection
      fileInput.addEventListener("change", (event) => {
        fileNameDisplay.textContent = event.target.files[0]
          ? `Selected file: ${event.target.files[0].name}`
          : "No file selected";
      });

      // Page Navigation
      function updatePage(direction) {
        saveFormData();
        currentPage += direction;
        pageNumber.textContent = `Page ${currentPage}`;
        prevBtn.classList.toggle("opacity-50", currentPage === 1);
        prevBtn.classList.toggle("cursor-not-allowed", currentPage === 1);
        nextBtn.classList.toggle("opacity-50", currentPage === totalPages);
        nextBtn.classList.toggle(
          "cursor-not-allowed",
          currentPage === totalPages
        );
        loadFormData();
      }

      prevBtn.addEventListener("click", () => {
        if (currentPage > 1) updatePage(-1);
      });
      nextBtn.addEventListener("click", () => {
        if (currentPage < totalPages) updatePage(1);
      });

      // Save Form Data
      document.getElementById("saveBtn").addEventListener("click", () => {
        saveFormData();
        alert(`Page ${currentPage} saved successfully!`);
      });

      // Export ZIP (Dummy Function)
      document.getElementById("exportZip").addEventListener("click", () => {
        alert("ZIP export functionality will be added here.");
      });

      // Load data on startup
      loadFormData();
    </script>
  </body>
</html>
